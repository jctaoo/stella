---
import CommonHeader, { type Props as CommonHeaderProps } from "@/components/CommonHeader.astro";
import SidebarNav from "@/components/sidebar-nav";
import MobileHeader from "@/components/mobile-header";
import "@/styles/global.css";
import TopLoaderVT from "@/components/TopLoaderVT.astro";
import { siteConfig } from "@/siteConfig";

type Props = {
  header: CommonHeaderProps;
};
const { header } = Astro.props;

// Determine if we're on the home page
const isHomePage = Astro.url.pathname === "/";

// get current route
const currentRoute = Astro.url.pathname;

const { bannerText } = siteConfig;
---

<html lang="en">
  <head>
    <CommonHeader title={header.title} description={header.description} />
    <TopLoaderVT />
  </head>
  <body class="overflow-hidden">
    <div class="flex h-screen">
      <MobileHeader
        isHome={isHomePage}
        currentRoute={currentRoute}
        client:load
        transition:name="mobile-header"
        transition:animate="none"
        transition:persist
      />
      <SidebarNav
        isHome={isHomePage}
        currentRoute={currentRoute}
        bannerText={bannerText}
        client:load
        transition:name="slide"
        transition:persist
        transition:animate="none"
      />
      <main
        class="flex-1 overflow-y-auto scrollbar pt-12 md:pt-0"
        transition:name="main"
        transition:animate="none"
      >
        <div class="h-full">
          <slot />
        </div>
      </main>
    </div>
  </body>
</html>
